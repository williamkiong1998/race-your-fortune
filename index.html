<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>马到成功 — Race Your Fortune</title>
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #C0392B; --gold: #D4AF37; --jade: #00A86B;
    --bg: #1A0A00; --ivory: #FFF8E7; --deep-red: #8B0000;
    --light-gold: #F5D76E;
  }
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  html, body { height:100%; overflow:hidden; background:var(--bg); }
  body { color:var(--ivory); font-family:'Crimson Text',serif; display:flex; justify-content:center; }

  #app {
    width:100%; max-width:430px; height:100%; height:100dvh;
    position:relative; overflow:hidden;
  }

  .screen {
    position:absolute; inset:0;
    display:flex; flex-direction:column; align-items:center;
    opacity:0; pointer-events:none;
    transition:opacity 0.3s ease;
    overflow-y:auto; overflow-x:hidden;
    -webkit-overflow-scrolling:touch;
  }
  .screen.active { opacity:1; pointer-events:all; }

  .screen-inner {
    width:100%; flex:1; min-height:100%;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    padding:16px 20px 28px;
  }

  /* BG */
  .bg-texture {
    position:fixed; inset:0;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(192,57,43,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(212,175,55,0.1) 0%, transparent 50%),
      linear-gradient(180deg,#1A0A00 0%,#0D0500 100%);
    z-index:0; pointer-events:none;
  }
  .lantern {
    position:fixed; width:8px; height:12px;
    background:var(--gold); border-radius:50%;
    opacity:0.22; animation:float 3s ease-in-out infinite; pointer-events:none;
  }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

  /* TOP BAR */
  .top-bar {
    position:fixed; top:0; left:50%; transform:translateX(-50%);
    width:100%; max-width:430px;
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 16px;
    z-index:100;
    background:linear-gradient(180deg,rgba(13,5,0,0.96) 70%,transparent);
  }
  .top-coins {
    font-family:'Bebas Neue',sans-serif; font-size:18px;
    color:var(--light-gold); display:flex; align-items:center; gap:5px;
  }
  .top-right { display:flex; gap:8px; align-items:center; }
  .back-btn, .reset-btn {
    border-radius:20px; padding:5px 12px; font-size:11px;
    letter-spacing:1px; cursor:pointer; font-family:'Crimson Text',serif;
    transition:background 0.2s; border:1px solid rgba(212,175,55,0.3);
  }
  .back-btn { background:rgba(212,175,55,0.1); color:var(--gold); }
  .reset-btn { background:rgba(192,57,43,0.13); color:#ff8a80; border-color:rgba(192,57,43,0.35); }
  .back-btn:active { background:rgba(212,175,55,0.22); }
  .reset-btn:active { background:rgba(192,57,43,0.28); }

  /* ─── SPLASH ─── */
  #splash .screen-inner { padding-top:58px; }
  .horse-container { width:100%; height:106px; position:relative; overflow:hidden; margin-bottom:4px; flex-shrink:0; }
  .splash-horse {
    position:absolute;
    left:50%; top:50%;
    transform:translate(-50%,-50%);
    animation:gallop-in 1s cubic-bezier(0.34,1.56,0.64,1) forwards;
    filter:drop-shadow(0 0 24px rgba(212,175,55,0.7));
    line-height:0;
  }
  @keyframes gallop-in {
    from { left:-140px; transform:translateY(-50%); }
    to   { left:50%;    transform:translate(-50%,-50%); }
  }
  @keyframes gallop-bob {
    0%,100% { left:50%; transform:translate(-50%,-50%) rotate(-2deg); }
    50%     { left:50%; transform:translate(-50%,-53%) rotate(2deg); }
  }
  .title-zh {
    font-family:'Ma Shan Zheng',cursive; font-size:50px; color:var(--gold);
    text-shadow:0 0 40px rgba(212,175,55,0.5),2px 2px 0 var(--deep-red);
    animation:drop-in 0.5s cubic-bezier(0.34,1.56,0.64,1) 0.8s both;
    letter-spacing:8px; line-height:1.1;
  }
  .title-en {
    font-family:'Crimson Text',serif; font-size:13px; color:var(--ivory);
    opacity:0.62; letter-spacing:4px; text-transform:uppercase;
    animation:drop-in 0.5s ease 1s both; margin-top:2px;
  }
  @keyframes drop-in { from{opacity:0;transform:translateY(-16px)} to{opacity:1;transform:translateY(0)} }
  .divider {
    width:60px; height:1px;
    background:linear-gradient(90deg,transparent,var(--gold),transparent);
    margin:14px 0; animation:drop-in 0.5s ease 1.1s both;
  }
  .stats-row {
    display:flex; gap:14px; margin-bottom:18px;
    animation:drop-in 0.5s ease 1.2s both;
    flex-wrap:wrap; justify-content:center;
  }
  .stat-chip {
    background:rgba(212,175,55,0.11); border:1px solid rgba(212,175,55,0.28);
    border-radius:30px; padding:6px 14px; font-size:12px;
    color:var(--gold); letter-spacing:1px; white-space:nowrap;
  }
  .stat-chip span {
    font-family:'Bebas Neue',sans-serif; font-size:17px;
    margin-left:4px; color:var(--light-gold);
  }

  /* BUTTONS */
  .btn-primary {
    background:linear-gradient(135deg,#F4D03F,#F39C12);
    color:var(--bg); border:none; border-radius:50px;
    padding:15px 52px; font-family:'Bebas Neue',sans-serif;
    font-size:20px; letter-spacing:3px; cursor:pointer;
    box-shadow:0 0 26px rgba(212,175,55,0.4),0 4px 16px rgba(0,0,0,0.5);
    animation:pulse-glow 2s ease-in-out infinite,drop-in 0.5s ease 1.4s both;
    transition:transform 0.15s; flex-shrink:0;
  }
  .btn-primary:active { transform:scale(0.96); }
  @keyframes pulse-glow {
    0%,100%{box-shadow:0 0 26px rgba(212,175,55,0.4),0 4px 16px rgba(0,0,0,0.5)}
    50%{box-shadow:0 0 46px rgba(212,175,55,0.7),0 4px 16px rgba(0,0,0,0.5)}
  }
  .btn-secondary {
    flex:1; background:transparent; border:1px solid rgba(212,175,55,0.38);
    color:var(--gold); border-radius:50px; padding:12px 14px;
    font-family:'Bebas Neue',sans-serif; font-size:14px;
    letter-spacing:2px; cursor:pointer; transition:all 0.2s;
  }
  .btn-secondary:active { background:rgba(212,175,55,0.1); }
  .btn-primary-small {
    flex:1.5; background:linear-gradient(135deg,#F4D03F,#F39C12);
    color:var(--bg); border:none; border-radius:50px;
    padding:12px 14px; font-family:'Bebas Neue',sans-serif;
    font-size:14px; letter-spacing:2px; cursor:pointer;
    box-shadow:0 4px 16px rgba(212,175,55,0.3); transition:all 0.15s;
  }
  .btn-primary-small:active { transform:scale(0.96); }

  /* ─── MODE SELECT ─── */
  .mode-cards { width:100%; max-width:340px; display:flex; flex-direction:column; gap:16px; }
  .mode-card {
    background:rgba(255,255,255,0.04);
    border:2px solid rgba(212,175,55,0.25);
    border-radius:16px;
    padding:24px 20px;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1);
    text-align:center;
  }
  .mode-card:active { transform:scale(0.97); }
  .mode-card:hover { border-color:var(--gold); background:rgba(212,175,55,0.08); }
  .mode-icon { font-size:48px; margin-bottom:12px; }
  .mode-title {
    font-family:'Bebas Neue',sans-serif;
    font-size:28px; letter-spacing:3px;
    color:var(--gold); margin-bottom:4px;
  }
  .mode-subtitle {
    font-family:'Ma Shan Zheng',cursive;
    font-size:16px; color:rgba(212,175,55,0.7);
    margin-bottom:12px;
  }
  .mode-desc { font-size:13px; line-height:1.6; color:rgba(255,248,231,0.6); }

  .tap-levels { width:100%; max-width:340px; display:flex; flex-direction:column; gap:10px; margin-bottom:16px; flex-shrink:0; }
  .tap-level-card {
    background:rgba(255,255,255,0.04);
    border:2px solid rgba(212,175,55,0.2);
    border-radius:12px; padding:12px 16px;
    cursor:pointer;
    transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1);
    flex-shrink:0;
  }
  .tap-level-card:active { transform:scale(0.98); }
  .tap-level-card.selected {
    border-color:var(--gold);
    background:rgba(212,175,55,0.1);
    box-shadow:0 0 18px rgba(212,175,55,0.2);
  }
  .tap-level-title {
    font-family:'Ma Shan Zheng',cursive;
    font-size:18px; color:var(--gold);
  }
  .tap-level-subtitle { font-size:10px; color:rgba(255,248,231,0.48); text-transform:uppercase; letter-spacing:2px; margin-bottom:4px; }
  .tap-level-bet {
    font-family:'Bebas Neue',sans-serif;
    font-size:22px; color:var(--light-gold);
    margin-bottom:4px;
  }
  .tap-level-desc { font-size:11px; line-height:1.4; color:rgba(255,248,231,0.52); }

  /* ─── PADDOCK ─── */
  #paddock .screen-inner { justify-content:flex-start; padding-top:54px; }
  .screen-header { text-align:center; margin-bottom:14px; flex-shrink:0; }
  .screen-header h2 { font-family:'Ma Shan Zheng',cursive; font-size:25px; color:var(--gold); letter-spacing:3px; }
  .screen-header p { font-size:11px; color:rgba(255,248,231,0.48); letter-spacing:2px; text-transform:uppercase; margin-top:2px; }
  .horses-grid { width:100%; display:flex; flex-direction:column; gap:8px; margin-bottom:14px; }
  .horse-card {
    background:rgba(255,255,255,0.04); border:1px solid rgba(212,175,55,0.18);
    border-radius:13px; padding:11px 14px; cursor:pointer;
    transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1);
    display:flex; align-items:center; gap:12px;
    position:relative; overflow:hidden; flex-shrink:0;
  }
  .horse-card::before {
    content:''; position:absolute; inset:0;
    background:linear-gradient(135deg,var(--card-color,rgba(212,175,55,0.1)),transparent);
    opacity:0; transition:opacity 0.25s;
  }
  .horse-card.selected { border-color:var(--card-color,var(--gold)); transform:translateX(5px) scale(1.01); box-shadow:0 0 18px rgba(212,175,55,0.18); }
  .horse-card.selected::before { opacity:1; }
  .horse-emoji { width:52px; height:52px; animation:idle-bob 2s ease-in-out infinite; flex-shrink:0; display:flex; align-items:center; justify-content:center; line-height:0; }
  @keyframes idle-bob { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }
  .horse-info { flex:1; min-width:0; }
  .horse-name-zh { font-family:'Ma Shan Zheng',cursive; font-size:17px; color:var(--gold); }
  .horse-name-en { font-size:11px; color:rgba(255,248,231,0.52); letter-spacing:1px; margin-top:1px; }
  .horse-trait { font-size:10px; color:rgba(255,248,231,0.35); font-style:italic; margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .horse-odds { font-family:'Bebas Neue',sans-serif; font-size:24px; color:var(--light-gold); text-align:right; line-height:1; flex-shrink:0; transition:opacity 0.2s; }
  .horse-odds small { display:block; font-family:'Crimson Text',serif; font-size:9px; color:rgba(255,248,231,0.32); letter-spacing:1px; }
  .selected-indicator { position:absolute; right:13px; top:50%; transform:translateY(-50%); width:8px; height:8px; border-radius:50%; background:var(--gold); box-shadow:0 0 7px var(--gold); opacity:0; transition:opacity 0.2s; }
  .horse-card.selected .selected-indicator { opacity:1; }
  .horse-card.selected .horse-odds { opacity:0; }

  /* ─── BET ─── */
  .selected-horse-display { text-align:center; margin-bottom:18px; flex-shrink:0; }
  .horse-emoji-large { display:flex; align-items:center; justify-content:center; animation:idle-bob 2s ease-in-out infinite; filter:drop-shadow(0 0 20px rgba(212,175,55,0.5)); }
  .selected-horse-display h3 { font-family:'Ma Shan Zheng',cursive; font-size:22px; color:var(--gold); margin-top:5px; }
  .coins-display { font-family:'Bebas Neue',sans-serif; font-size:12px; color:rgba(212,175,55,0.52); letter-spacing:2px; margin-top:2px; }
  .bet-section { width:100%; max-width:340px; margin-bottom:14px; flex-shrink:0; }
  .bet-label { display:flex; justify-content:space-between; font-size:11px; color:rgba(255,248,231,0.42); letter-spacing:2px; text-transform:uppercase; margin-bottom:7px; }
  .bet-amount { font-family:'Bebas Neue',sans-serif; font-size:42px; color:var(--light-gold); text-shadow:0 0 16px rgba(212,175,55,0.4); line-height:1; }
  .bet-amount small { font-size:14px; color:rgba(255,248,231,0.32); letter-spacing:2px; margin-left:4px; }
  input[type="range"] { width:100%; height:6px; -webkit-appearance:none; background:rgba(212,175,55,0.18); border-radius:3px; outline:none; margin:13px 0; cursor:pointer; }
  input[type="range"]::-webkit-slider-thumb { -webkit-appearance:none; width:22px; height:22px; border-radius:50%; background:var(--gold); box-shadow:0 0 10px rgba(212,175,55,0.6); cursor:pointer; }
  .fortune-preview {
    width:100%; max-width:340px; min-height:52px; text-align:center;
    padding:13px 15px; background:rgba(212,175,55,0.05);
    border:1px solid rgba(212,175,55,0.14); border-radius:11px;
    font-style:italic; font-size:13px; color:rgba(255,248,231,0.72);
    line-height:1.5; transition:all 0.25s ease; margin-bottom:18px; flex-shrink:0;
  }
  .fortune-preview.chaos { background:rgba(192,57,43,0.1); border-color:rgba(192,57,43,0.38); color:var(--light-gold); animation:shake-subtle 0.3s ease; }
  @keyframes shake-subtle { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-4px)} 75%{transform:translateX(4px)} }

  /* ─── RACE ─── */
  #race { background:#080602; }
  #race .screen-inner { padding:0; justify-content:flex-start; overflow:hidden; }

  /* Grandstand */
  .race-grandstand {
    width:100%; flex-shrink:0; height:72px;
    background:linear-gradient(180deg,#0a0a1c 0%,#180c06 100%);
    position:relative; overflow:hidden;
    display:flex; align-items:flex-end; justify-content:center;
  }
  .grandstand-crowd { display:flex; gap:2px; padding-bottom:4px; width:100%; justify-content:center; }
  .crowd-person { width:5px; border-radius:3px 3px 0 0; animation:crowd-cheer 0.4s ease-in-out infinite alternate; }
  @keyframes crowd-cheer { from{transform:scaleY(1)} to{transform:scaleY(0.65)} }

  /* HUD bar — sits between grandstand and track, full width, always visible */
  .race-hud {
    width:100%; flex-shrink:0;
    background:linear-gradient(180deg,#180c06,#0e0602);
    border-top:1px solid rgba(212,175,55,0.12);
    border-bottom:1px solid rgba(212,175,55,0.12);
    display:flex; align-items:center; justify-content:space-between;
    padding:6px 18px;
    z-index:50; pointer-events:none;
  }
  .race-timer {
    font-family:'Bebas Neue',sans-serif; font-size:48px;
    color:var(--gold); text-shadow:0 0 18px rgba(212,175,55,0.9);
    line-height:1;
  }
  .race-timer-label {
    font-family:'Bebas Neue',sans-serif; font-size:10px;
    letter-spacing:2px; color:rgba(212,175,55,0.5); text-transform:uppercase;
    align-self:flex-end; padding-bottom:4px;
  }
  .race-hud-title {
    font-family:'Ma Shan Zheng',cursive; font-size:16px;
    color:var(--gold); opacity:0.6; letter-spacing:3px;
  }

  /* Track */
  .race-track-wrap { width:100%; flex:1; position:relative; overflow:hidden; }
  .track-surface {
    width:100%; height:100%;
    background:repeating-linear-gradient(180deg,
      #3a1e0a 0px,#3a1e0a 1px,
      #472410 1px,#472410 57px,
      #2c1508 57px,#2c1508 58px
    );
  }
  .track-grass-top, .track-grass-bottom { position:absolute; left:0; right:0; height:13px; z-index:2; }
  .track-grass-top { top:0; background:linear-gradient(180deg,#163208,#2a5216); }
  .track-grass-bottom { bottom:0; background:linear-gradient(180deg,#2a5216,#163208); }
  .lane-lines { position:absolute; inset:13px 0; z-index:3; pointer-events:none; }
  .lane-line { position:absolute; left:0; right:0; height:1px; background:rgba(255,255,255,0.06); }
  .finish-line {
    position:absolute; right:42px; top:9px; bottom:9px;
    width:6px; z-index:5;
    background:repeating-linear-gradient(180deg,#fff 0,#fff 9px,#111 9px,#111 18px);
    border-radius:2px; box-shadow:0 0 10px rgba(255,255,255,0.35);
  }
  .finish-flag { position:absolute; right:28px; top:4px; font-size:9px; font-family:"Bebas Neue",sans-serif; letter-spacing:1px; color:rgba(255,255,255,0.7); z-index:6; writing-mode:vertical-rl; }

  /* Track speed lines */
  .track-speed-line {
    position:absolute; top:0; bottom:0; width:2px;
    background:linear-gradient(180deg,transparent,rgba(255,255,255,0.035),transparent);
    animation:speed-scroll linear infinite; z-index:1;
  }
  @keyframes speed-scroll { from{transform:translateX(0)} to{transform:translateX(-180px)} }

  /* Dust */
  .dust { position:absolute; width:3px; height:3px; background:rgba(180,130,70,0.38); border-radius:50%; pointer-events:none; animation:dust-float 0.8s ease-out forwards; z-index:8; }
  @keyframes dust-float { from{transform:translateY(0) scale(1);opacity:0.55} to{transform:translateY(-13px) scale(0.2);opacity:0} }

  /* Race horses */
  .race-horse { position:absolute; top:50%; transform:translateY(-50%); z-index:10; display:flex; flex-direction:column; align-items:center; transition:left 0.08s linear; }
  .race-horse-body { display:block; line-height:0; animation:gallop-anim 0.3s ease-in-out infinite; }
  @keyframes gallop-anim {
    0%,100% { transform:scaleY(1) translateY(0); }
    50%     { transform:scaleY(0.88) translateY(2px); }
  }
  .race-horse.player-horse .race-horse-body { filter:drop-shadow(0 0 9px rgba(212,175,55,0.9)); }
  .race-horse-label { font-family:'Bebas Neue',sans-serif; font-size:9px; letter-spacing:1px; color:rgba(255,248,231,0.44); margin-top:1px; white-space:nowrap; }
  .race-horse.player-horse .race-horse-label { color:var(--gold); }
  .player-star { position:absolute; top:-11px; left:50%; transform:translateX(-50%); font-size:10px; color:var(--gold); animation:star-pulse 0.6s ease-in-out infinite; }
  @keyframes star-pulse { 0%,100%{opacity:1;transform:translateX(-50%) scale(1)} 50%{opacity:0.45;transform:translateX(-50%) scale(0.65)} }

  .race-progress-bar { position:absolute; bottom:0; left:0; right:0; height:3px; background:rgba(212,175,55,0.08); z-index:20; }
  .race-progress-fill { height:100%; background:linear-gradient(90deg,var(--red),var(--gold)); width:0%; transition:width 0.1s linear; }

  .chaos-event { position:absolute; font-size:36px; pointer-events:none; z-index:20; animation:chaos-appear 1.2s ease forwards; }
  @keyframes chaos-appear {
    0%{transform:scale(0) rotate(-20deg);opacity:0}
    25%{transform:scale(1.5) rotate(10deg);opacity:1}
    70%{transform:scale(1.2) rotate(0deg) translateY(-10px);opacity:1}
    100%{transform:scale(0.4) rotate(5deg) translateY(-40px);opacity:0}
  }

  .slow-mo-banner { position:absolute; bottom:18px; left:50%; transform:translateX(-50%); font-family:'Bebas Neue',sans-serif; font-size:20px; letter-spacing:7px; color:var(--gold); opacity:0; pointer-events:none; z-index:30; text-shadow:0 0 14px var(--gold); white-space:nowrap; transition:opacity 0.3s; }

  .countdown-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.72); z-index:40; font-family:'Bebas Neue',sans-serif; font-size:108px; color:var(--gold); text-shadow:0 0 40px rgba(212,175,55,0.8); }

  /* ─── RESULT ─── */
  .result-horse { display:flex; align-items:center; justify-content:center; animation:result-bounce 0.6s cubic-bezier(0.34,1.56,0.64,1) both; flex-shrink:0; margin-bottom:7px; }
  @keyframes result-bounce { from{transform:scale(0) rotate(-10deg);opacity:0} to{transform:scale(1) rotate(0);opacity:1} }
  .result-badge { font-family:'Bebas Neue',sans-serif; font-size:42px; letter-spacing:5px; padding:6px 26px; border-radius:50px; animation:result-bounce 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.1s both; flex-shrink:0; margin-bottom:5px; }
  .result-badge.win { background:linear-gradient(135deg,var(--gold),#B8860B); color:var(--bg); box-shadow:0 0 34px rgba(212,175,55,0.5); }
  .result-badge.lose { background:rgba(192,57,43,0.18); border:2px solid var(--red); color:var(--red); }
  .coin-change { font-family:'Bebas Neue',sans-serif; font-size:30px; animation:result-bounce 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.2s both; flex-shrink:0; margin-bottom:13px; }
  .coin-change.win { color:var(--light-gold); }
  .coin-change.lose { color:#ff6b6b; }
  .fortune-display { font-style:italic; font-size:15px; line-height:1.6; color:var(--ivory); max-width:290px; text-align:center; padding:14px 16px; border-left:2px solid var(--gold); background:rgba(212,175,55,0.04); border-radius:0 11px 11px 0; animation:slide-in-left 0.5s ease 0.4s both; flex-shrink:0; margin-bottom:18px; }
  @keyframes slide-in-left { from{opacity:0;transform:translateX(-16px)} to{opacity:1;transform:translateX(0)} }
  .result-actions { display:flex; gap:9px; width:100%; max-width:290px; animation:slide-in-left 0.5s ease 0.6s both; flex-shrink:0; }

  /* ─── SHARE CARD ─── */
  .card-container { width:100%; max-width:310px; border-radius:17px; overflow:hidden; box-shadow:0 16px 48px rgba(0,0,0,0.6),0 0 32px rgba(212,175,55,0.16); animation:card-reveal 0.6s cubic-bezier(0.34,1.56,0.64,1) both; flex-shrink:0; margin-bottom:13px; }
  @keyframes card-reveal { from{transform:scale(0.82) rotateY(-10deg);opacity:0} to{transform:scale(1) rotateY(0);opacity:1} }
  .card-top { background:linear-gradient(135deg,#8B0000 0%,#C0392B 40%,#D4AF37 100%); padding:20px 18px 14px; text-align:center; position:relative; overflow:hidden; }
  .card-top::before { content:'囍'; position:absolute; font-family:'Ma Shan Zheng',cursive; font-size:72px; opacity:0.1; top:-8px; left:-12px; transform:rotate(-15deg); color:#fff; }
  .card-top::after { content:'福'; position:absolute; font-family:'Ma Shan Zheng',cursive; font-size:72px; opacity:0.1; bottom:-8px; right:-12px; transform:rotate(15deg); color:#fff; }
  .card-horse-display { display:flex; justify-content:center; filter:drop-shadow(0 4px 10px rgba(0,0,0,0.5)); margin-bottom:5px; }
  .card-title { font-family:'Ma Shan Zheng',cursive; font-size:30px; color:#FFF8E7; text-shadow:2px 2px 0 rgba(0,0,0,0.22); letter-spacing:5px; }
  .card-subtitle { font-size:9px; color:rgba(255,248,231,0.62); letter-spacing:3px; text-transform:uppercase; margin-top:2px; }
  .card-middle { background:#1A0A00; padding:16px 18px; text-align:center; }
  .card-result-badge { display:inline-block; font-family:'Bebas Neue',sans-serif; font-size:11px; letter-spacing:3px; padding:3px 13px; border-radius:18px; margin-bottom:10px; }
  .card-result-badge.win { background:rgba(212,175,55,0.16); border:1px solid var(--gold); color:var(--gold); }
  .card-result-badge.lose { background:rgba(192,57,43,0.16); border:1px solid var(--red); color:rgba(255,200,200,0.78); }
  .card-fortune { font-style:italic; font-size:13px; line-height:1.6; color:var(--ivory); margin-bottom:10px; }
  .card-idiom { font-family:'Ma Shan Zheng',cursive; font-size:15px; color:var(--gold); opacity:0.62; }
  .card-bottom { background:linear-gradient(135deg,#0D0500,#1A0A00); padding:11px 18px; display:flex; justify-content:space-between; align-items:center; border-top:1px solid rgba(212,175,55,0.1); }
  .card-fortune-collected { font-family:'Bebas Neue',sans-serif; font-size:20px; color:var(--light-gold); line-height:1; }
  .card-fortune-collected small { display:block; font-family:'Crimson Text',serif; font-size:9px; color:rgba(255,248,231,0.32); letter-spacing:2px; text-transform:uppercase; }
  .card-tagline { font-size:9px; color:rgba(255,248,231,0.32); text-align:right; font-style:italic; max-width:100px; }
  .share-actions { display:flex; gap:9px; width:100%; max-width:310px; animation:drop-in 0.5s ease 0.5s both; flex-shrink:0; }

  /* PARTICLES */
  .particle { position:fixed; pointer-events:none; z-index:200; font-size:15px; animation:particle-fall 1s ease-out forwards; }
  @keyframes particle-fall { from{transform:translateY(-20px) rotate(0);opacity:1} to{transform:translateY(88px) rotate(360deg);opacity:0} }
</style>
</head>
<body>
<div class="bg-texture" id="bgTexture"></div>
<div id="app">

  <!-- TOP BAR -->
  <div class="top-bar" id="topBar">
    <div class="top-coins">◆ <span id="coinDisplay">888</span></div>
    <div class="top-right">
      <button class="reset-btn" id="resetBtn" onclick="resetCoins()">↺ Reset</button>
      <button class="back-btn" id="backBtn" style="display:none" onclick="goBack()">← Back</button>
    </div>
  </div>

  <!-- SPLASH -->
  <div class="screen active" id="splash">
    <div class="screen-inner" style="padding-top:58px">
      <div class="horse-container"><div class="splash-horse" id="splashHorse"><svg viewBox="0 0 585.07 585.07" width="110" height="110" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#D4AF37"/></svg></div></div>
      <div class="title-zh">马到成功</div>
      <div class="title-en">Race Your Fortune</div>
      <div class="divider"></div>
      <div class="stats-row">
        <div class="stat-chip">◆ Fortune<span id="splashCoins">888</span></div>
        <div class="stat-chip">— Streak<span id="splashStreak">1</span></div>
      </div>
      <button class="btn-primary" onclick="goTo('modeselect')">RACE NOW</button>
    </div>
  </div>

  <!-- MODE SELECT -->
  <div class="screen" id="modeselect">
    <div class="screen-inner">
      <div class="screen-header" style="margin-bottom:32px">
        <h2>选择游戏模式</h2>
        <p>Choose Your Game Mode</p>
      </div>
      
      <div class="mode-cards">
        <div class="mode-card" onclick="selectMode('bet')">
          <div class="mode-icon">◆</div>
          <div class="mode-title">BET MODE</div>
          <div class="mode-subtitle">下注模式</div>
          <div class="mode-desc">Place your bet and watch the race unfold. Fortune favors the bold.</div>
        </div>
        
        <div class="mode-card" onclick="selectMode('tap')">
          <div class="mode-icon">⚡</div>
          <div class="mode-title">TAP MODE</div>
          <div class="mode-subtitle">竞速模式</div>
          <div class="mode-desc">Tap rapidly to make your horse run faster. Victory is in your hands.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PADDOCK -->
  <div class="screen" id="paddock">
    <div class="screen-inner" style="justify-content:flex-start;padding-top:54px">
      <div class="screen-header"><h2>选择你的马</h2><p>Choose Your Horse</p></div>
      <div class="horses-grid" id="horsesGrid"></div>
      <button class="btn-primary" id="confirmPickBtn" onclick="confirmHorsePick()" style="opacity:0.4;pointer-events:none;animation:none">CONFIRM PICK</button>
    </div>
  </div>

  <!-- BET -->
  <div class="screen" id="bet">
    <div class="screen-inner">
      <div class="selected-horse-display">
        <span class="horse-emoji-large" id="betHorseEmoji"></span>
        <h3 id="betHorseName">Red Mane</h3>
        <div class="coins-display">BALANCE: <span id="betBalance">888</span> COINS</div>
      </div>
      <div class="bet-section">
        <div class="bet-label"><span>YOUR BET</span><span id="betOddsLabel">ODDS: 1.5x</span></div>
        <div class="bet-amount"><span id="betAmountDisplay">100</span><small>coins</small></div>
        <input type="range" id="betSlider" min="10" max="888" value="100" oninput="updateBet(this.value)">
      </div>
      <div class="fortune-preview" id="fortunePreview">"The ancestors appreciate your caution."</div>
      <button class="btn-primary" style="animation:none" onclick="startRace()">PLACE BET</button>
    </div>
  </div>

  <!-- TAP LEVEL SELECT -->
  <div class="screen" id="taplevel">
    <div class="screen-inner" style="justify-content:flex-start;padding-top:54px">
      <div class="selected-horse-display" style="margin-bottom:14px;display:flex;flex-direction:column;align-items:center">
        <span class="horse-emoji-large" id="tapHorseEmoji" style="width:64px;height:64px;display:flex;justify-content:center;align-items:center"></span>
        <h3 id="tapHorseName" style="font-size:19px">Red Mane</h3>
        <div class="coins-display">BALANCE: <span id="tapBalance">888</span> COINS</div>
      </div>
      
      <div class="screen-header" style="margin-bottom:12px;flex-shrink:0">
        <h2 style="font-size:22px">选择难度</h2>
        <p>Choose Difficulty</p>
      </div>
      
      <div class="tap-levels">
        <div class="tap-level-card" data-level="easy" onclick="selectTapLevel('easy',50)">
          <div class="tap-level-title">小试牛刀</div>
          <div class="tap-level-subtitle">Easy</div>
          <div class="tap-level-bet">50 COINS</div>
          <div class="tap-level-desc">Opponents run slowly. Victory is yours.</div>
        </div>
        
        <div class="tap-level-card" data-level="medium" onclick="selectTapLevel('medium',100)">
          <div class="tap-level-title">势均力敌</div>
          <div class="tap-level-subtitle">Medium</div>
          <div class="tap-level-bet">100 COINS</div>
          <div class="tap-level-desc">Balanced challenge. Tap fast to win.</div>
        </div>
        
        <div class="tap-level-card" data-level="hard" onclick="selectTapLevel('hard',200)">
          <div class="tap-level-title">背水一战</div>
          <div class="tap-level-subtitle">Hard</div>
          <div class="tap-level-bet">200 COINS</div>
          <div class="tap-level-desc">Furious opponents. Only the fastest win.</div>
        </div>
        
        <div class="tap-level-card" data-level="extreme" onclick="selectTapLevel('extreme',400)">
          <div class="tap-level-title">极限挑战</div>
          <div class="tap-level-subtitle">Extreme</div>
          <div class="tap-level-bet">400 COINS</div>
          <div class="tap-level-desc">Lightning speed. Victory demands perfection.</div>
        </div>
      </div>
      
      <button class="btn-primary" style="animation:none;flex-shrink:0;padding:13px 48px;font-size:18px" onclick="startTapRace()">START RACE</button>
    </div>
  </div>

  <!-- RACE -->
  <div class="screen" id="race">
    <div class="screen-inner">
      <div class="race-grandstand" id="grandstand">
        <div class="grandstand-crowd" id="grandstandCrowd"></div>
      </div>
      <div class="race-hud">
        <div class="race-hud-title">马到成功</div>
        <div style="display:flex;align-items:baseline;gap:5px">
          <div class="race-timer" id="raceTimer">12</div>
          <div class="race-timer-label">sec</div>
        </div>
      </div>
      <div class="race-track-wrap" id="raceTrackWrap">
        <div class="track-surface"></div>
        <div class="track-grass-top"></div>
        <div class="track-grass-bottom"></div>
        <div class="lane-lines" id="laneLines"></div>
        <div class="finish-line"></div>
        <div class="finish-flag">FINISH</div>
        <div class="slow-mo-banner" id="slowMoBanner">FINAL STRETCH</div>
        <div class="race-progress-bar"><div class="race-progress-fill" id="progressFill"></div></div>
      </div>
      <div class="countdown-overlay" id="countdownOverlay">3</div>
    </div>
  </div>

  <!-- RESULT -->
  <div class="screen" id="result">
    <div class="screen-inner">
      <div class="result-horse" id="resultHorse"></div>
      <div class="result-badge" id="resultBadge">WIN</div>
      <div class="coin-change" id="coinChange">+450 COINS</div>
      <div class="fortune-display" id="fortuneDisplay"></div>
      <div class="result-actions">
        <button class="btn-secondary" onclick="goTo('paddock')">RACE AGAIN</button>
        <button class="btn-primary-small" onclick="goTo('sharecard')">SHARE FORTUNE ✦</button>
      </div>
    </div>
  </div>

  <!-- SHARE CARD -->
  <div class="screen" id="sharecard">
    <div class="screen-inner">
      <div class="card-container">
        <div class="card-top">
          <span class="card-horse-display" id="cardHorse"></span>
          <div class="card-title">马到成功</div>
          <div class="card-subtitle">Race Your Fortune</div>
        </div>
        <div class="card-middle">
          <div class="card-result-badge" id="cardBadge">WIN</div>
          <div class="card-fortune" id="cardFortune"></div>
          <div class="card-idiom">天意难测</div>
        </div>
        <div class="card-bottom">
          <div class="card-fortune-collected"><small>Fortune Collected</small><span id="cardCoins">888</span></div>
          <div class="card-tagline">"What does your horse say about you?"</div>
        </div>
      </div>
      <div class="share-actions">
        <button class="btn-secondary" onclick="goTo('paddock')">RACE AGAIN</button>
        <button class="btn-primary-small" onclick="shareCard()">SHARE ✦</button>
      </div>
    </div>
  </div>

</div>
<script>
const state = {
  coins: parseInt(localStorage.getItem('coins')||'888'),
  streak: parseInt(localStorage.getItem('streak')||'1'),
  currentScreen:'splash',
  gameMode:null,  // 'bet' or 'tap'
  selectedHorse:null,
  betAmount:100,
  tapDifficulty:'medium', // 'easy','medium','hard'
  raceResult:null,
  fortune:''
};


const horseSVGs = {
  'H1': `<svg viewBox="0 0 585.07 585.07" width="38" height="38" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#C0392B"/></svg>`,
  'H2': `<svg viewBox="0 0 585.07 585.07" width="38" height="38" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#1A9E6A"/></svg>`,
  'H3': `<svg viewBox="0 0 585.07 585.07" width="38" height="38" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#D4AF37"/></svg>`,
  'H4': `<svg viewBox="0 0 585.07 585.07" width="38" height="38" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#7B4FBE"/></svg>`,
  'H5': `<svg viewBox="0 0 585.07 585.07" width="38" height="38" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#C0507A"/></svg>`,
};

const horseSVGsLarge = {
  'H1': `<svg viewBox="0 0 585.07 585.07" width="80" height="80" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#C0392B"/></svg>`,
  'H2': `<svg viewBox="0 0 585.07 585.07" width="80" height="80" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#1A9E6A"/></svg>`,
  'H3': `<svg viewBox="0 0 585.07 585.07" width="80" height="80" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#D4AF37"/></svg>`,
  'H4': `<svg viewBox="0 0 585.07 585.07" width="80" height="80" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#7B4FBE"/></svg>`,
  'H5': `<svg viewBox="0 0 585.07 585.07" width="80" height="80" xmlns="http://www.w3.org/2000/svg"><path d="M516.665,268.961c-2.612-2.081-5.633-6.307-7.075-9.321c-15.941-33.423-61.555-43.061-104.987-41.012 c-46.5,2.19-104.438,10.713-112.958,3.408c-7.731-6.629,6.192-1.623,21.754-12.117c2.772-1.871,2.134-3.174-1.188-2.76 c-10.941,1.348-34.277,2.379-47.605-10.678c-2.397-2.334-5.55-6.838-6.644-9.998c-5.902-17.031,22.219-21.462,23.162-4.775 c0.189,3.333,0.57,3.57,1.519,0.363c2.349-7.923,3.638-22.015-14.127-27.479c-22.068-6.792-41.357-4.702-49.334-14.854 c-2.063-2.627-0.195-4.459,3.044-3.632c12.856,3.298,45.025,8.766,75.681-8.334c2.914-1.629,2.583-2.358-0.686-1.67 c-14.118,2.984-50.596,7.554-74.712-17.522c-22.455-23.351-42.386-16.488-51.293-11.281c-2.894,1.688-7.09,1.821-9.824-0.097 c-4.679-3.287-12.386-8.329-21.536-12.903c0,0-14.786-5.843-19.901-24.837c-5.113-18.985-10.042-3.467-9.49,4.936 c0.301,4.678,0.78,10.719,1.138,15.149c0.272,3.328-1.217,8.128-3.584,10.489c-2.885,2.887-6.783,6.244-9.975,7.039 c-5.84,1.457-12.049,4.2-15.155,14.423s-21.911,20.082-31.401,24.647c-9.49,4.563-27.208,17.709-23.738,25.378 c3.467,7.669-5.296,16.976,10.961,21.548c16.252,4.563,17.709,1.64,20.995-4.933c2.973-5.946,17.741-0.541,34.853-7.149 c3.121-1.206,8.145-1.876,11.47-1.525c4.321,0.458,10.27,0.538,15.397-1.368c9.31-3.47,4.38,5.479,4.38,10.402 c0,4.395,1.02,48.078,3.567,67.616c0.428,3.316-0.364,8.311-1.865,11.299c-6.324,12.625-19.999,45.238-7.746,71.062 c1.434,3.02,0.603,6.655-2.396,8.115c-7.985,3.895-24.042,10.456-42.129,10.799c-25.807,0.484-31.897,16.556-33.112,22.645 c-1.218,6.088-29.702,41.269-28.236,53.682c1.339,11.359-12.619,18.441-13.878,38.869c-0.207,3.333,2.675,5.609,5.902,4.729 c9.005-2.465,25.136-8.825,25.136-22.78c0-19.353-1.46-15.155,6.573-28.845c7.572-12.903,13.196-40.069,44.36-43.32 c3.322-0.343,8.686,0.267,11.972,0.869c4.188,0.769,9.847,1.655,14.357,1.844c3.339,0.143,4.4,1.727,2.923,4.729 c-1.889,3.843-3.839,9.387-3.251,15.097c0.346,3.321,3.88,7.247,6.646,9.12c8.473,5.745,25.561,18.205,35.261,31.428 c1.98,2.695,5.527,6.839,8.851,7.205c2.837,0.308,7.02,0.106,13.084-1.412c15.338-3.83,17.159,2.926,18.625,4.562 c1.46,1.644,10.406-4.93,23.915-3.646c0,0,6.204,0-4.383-9.31c-8.033-7.063-10.495-13.808-15.599-15.936 c-3.085-1.288-8.715-0.313-11.801,0.981c-3.821,1.596-3.724,3.995-6.011,8.57c-3.106,6.206-8.402-2.193-11.136-4.386 c-2.743-2.187-32.323-15.882-30.313-29.938c2.01-14.062,20.998-1.1,51.492-8.948c17.31-4.463,27.677-6.266,33.411-6.999 c3.316-0.419,8.733-0.65,12.079-0.75c8.698-0.248,24.272-0.166,29.557,3.186c7.081,4.492,74.425,4.569,106.574-12.731 c2.938-1.591,5.166-0.438,5.415,2.896c0.401,5.533,1.442,13.377,4.138,16.959c3.806,5.077,1.135,28.75-10.043,35.836 c-2.819,1.797-8.357,2.205-11.686,2.584c-15.144,1.708-40.223,5.579-50.152,11.686c-2.855,1.749-6.325,5.828-8.973,7.867 c-8.065,6.212-23.543,19.729-26.327,33.874c-0.641,3.28,2.341,6.224,5.678,6.283c5.139,0.101,12.69-0.077,19.204-1.46 c3.266-0.697,6.563-4.332,7.947-7.377c3.611-7.949,12.176-21.775,28.873-24.477c19.299-3.114,40.654-6.472,51.489-9.587 c3.216-0.916,6.597,0.461,7.282,3.729c0.887,4.197,1.524,9.978,0.023,14.99c-2.73,9.126-18.258,34.69-37.787,45.648 c-15.203,8.518-24.648,15.049-27.497,21.828c-1.301,3.08,1.867,6.372,5.184,6.745c8.263,0.928,22.827,1.749,29.063-2.825 c1.956-1.442,3.339-2.66,4.297-3.688c2.146-2.288,0.987-6.916,1.667-9.239c0.401-1.371,1.33-2.411,3.345-1.867 c4.747,1.276,6.939,2.736,9.683-3.647c2.742-6.396,31.947-38.349,43.639-44.556c11.686-6.212,10.409-18.808,5.846-32.503 c-4.568-13.689-7.488-43.272,8.21-53.132c15.705-9.859,42.18-36.15,52.949-50.756c5.798-7.861,15.562-14.563,21.408-25.227 c1.614-2.932,3.878-3.168,5.421-0.201c12.737,24.5,18.908,55.312,0.213,69.244c-24.914,18.566-11.438,37.563-3.476,45.649 c2.347,2.382,2.831,1.874,1.253-1.07c-11.142-20.747,13.382-25.026,17.626-14.581c3.439,8.481-3.057,31.51-6.461,42.32 c-0.999,3.187,0.538,4.434,2.867,2.039c3.41-3.505,5.976-8.062,7.643-11.608c1.412-3.026,1.654-2.955,1.105,0.343 c-5.385,32.09,7.229,51.932,14.191,60.106c2.163,2.548,3.446,1.726,2.92-1.572c-5.609-35.163,30.653-53.628,30.659-120.621 C585.047,331.677,545.533,291.977,516.665,268.961z" fill="#C0507A"/></svg>`,
};

const horses = [
  {id:0,zh:'红鬃',en:'Red Mane',     emoji:'H1',odds:1.5,trait:'"The crowd favourite"',      color:'rgba(192,57,43,0.5)'},
  {id:1,zh:'玉驰',en:'Jade Gallop',  emoji:'H2',odds:4.0,trait:'"Quiet power, loud finish"',  color:'rgba(0,168,107,0.5)'},
  {id:2,zh:'金蹄',en:'Golden Hoof',  emoji:'H3',odds:2.5,trait:'"Slow starter, strong finish"',color:'rgba(212,175,55,0.5)'},
  {id:3,zh:'风舞',en:'Storm Dancer', emoji:'H4',odds:3.5,trait:'"Beautiful. Unpredictable."',  color:'rgba(130,60,180,0.5)'},
  {id:4,zh:'福缘',en:'Lucky Blossom',emoji:'H5',odds:2.0,trait:'"Today\'s zodiac pick ✦"',    color:'rgba(220,100,140,0.5)'},
];

const betCopy=[
  [10,100,'"The ancestors appreciate your caution."'],
  [101,300,'"A worthy offering to the race gods."'],
  [301,600,'"The dragon is beginning to notice you."'],
  [601,99999,'"Fortune favours the audacious. Probably."'],
];

const winFortunes=[
  "carried your faith across the line. The horse remembers those who believed first.",
  "Your ancestors placed this bet centuries ago. You just collected.",
  "The dragon saw your courage — and nodded.",
  "You bet big. The universe respected it. 马到成功.",
  "Fortune didn't find you. You chased it down on horseback.",
  "The zodiac aligned. The horse was always yours today."
];
const loseFortunes=[
  "The firecracker had other plans. The horse understands. Try again.",
  "stumbled at the line. Even jade cracks under pressure. It rebuilds stronger.",
  "You lost coins. You gained character. The horse is proud of you anyway.",
  "Heaven's will is unpredictable. That's what makes it heaven.",
  "The ancestors are laughing with you, not at you. Probably.",
  "A loss on the first race is just a longer victory story."
];
const chaosEvents=['爆','猫','风','福','龙'];

// NAV
function selectMode(mode){
  state.gameMode=mode;
  if(mode==='tap'){
    // Randomly assign a horse for tap mode
    state.selectedHorse=horses[Math.floor(Math.random()*horses.length)];
    goTo('taplevel');
  } else {
    goTo('paddock');
  }
}

function goTo(s){
  document.getElementById(state.currentScreen).classList.remove('active');
  document.getElementById(s).classList.add('active');
  state.currentScreen=s; updateTopBar();
  if(s==='paddock')  renderPaddock();
  if(s==='bet')      renderBet();
  if(s==='taplevel') renderTapLevel();
  if(s==='race')     setupRace();
  if(s==='sharecard')renderShareCard();
}
function goBack(){
  const m={
    modeselect:'splash',
    paddock:'modeselect',
    bet:'paddock',
    taplevel:'modeselect',
    result:(state.gameMode==='tap'?'modeselect':'paddock'),
    sharecard:'result'
  };
  if(m[state.currentScreen]) goTo(m[state.currentScreen]);
}
function updateTopBar(){
  document.getElementById('coinDisplay').textContent=state.coins.toLocaleString();
  document.getElementById('splashCoins').textContent=state.coins.toLocaleString();
  document.getElementById('backBtn').style.display=(['splash','race'].includes(state.currentScreen)?'none':'block');
  document.getElementById('resetBtn').style.display=(state.currentScreen==='race'?'none':'block');
}
function resetCoins(){
  state.coins=888;
  localStorage.setItem('coins','888');
  document.getElementById('splashCoins').textContent='888';
  updateTopBar();
  const btn=document.getElementById('resetBtn');
  const orig=btn.textContent;
  btn.textContent='✓ 888';
  setTimeout(()=>btn.textContent=orig,1500);
}

// PADDOCK
function renderPaddock(){
  const g=document.getElementById('horsesGrid'); g.innerHTML='';
  horses.forEach((h,i)=>{
    const c=document.createElement('div');
    c.className='horse-card'+(state.selectedHorse?.id===h.id?' selected':'');
    c.style.setProperty('--card-color',h.color);
    c.innerHTML=`<div class="horse-emoji" style="animation-delay:${i*0.16}s">${horseSVGs[h.emoji]||h.en}</div>
      <div class="horse-info">
        <div class="horse-name-zh">${h.zh}</div>
        <div class="horse-name-en">${h.en}</div>
        <div class="horse-trait">${h.trait}</div>
      </div>
      <div class="horse-odds">${h.odds}x<small>ODDS</small></div>
      <div class="selected-indicator"></div>`;
    c.onclick=()=>selectHorse(h);
    g.appendChild(c);
  });
  const btn=document.getElementById('confirmPickBtn');
  btn.style.opacity=state.selectedHorse?'1':'0.4';
  btn.style.pointerEvents=state.selectedHorse?'all':'none';
}
function selectHorse(h){ state.selectedHorse=h; renderPaddock(); }
function confirmHorsePick(){
  if(!state.selectedHorse) return;
  goTo(state.gameMode==='bet'?'bet':'taplevel');
}

// BET
function renderBet(){
  if(!state.selectedHorse) return;
  document.getElementById('betHorseEmoji').innerHTML=horseSVGsLarge[state.selectedHorse.emoji]||state.selectedHorse.en;
  document.getElementById('betHorseName').textContent=`${state.selectedHorse.zh} — ${state.selectedHorse.en}`;
  document.getElementById('betBalance').textContent=state.coins.toLocaleString();
  document.getElementById('betOddsLabel').textContent=`ODDS: ${state.selectedHorse.odds}x`;
  const sl=document.getElementById('betSlider');
  sl.max=Math.max(state.coins,10); sl.value=Math.min(state.betAmount,state.coins);
  updateBet(sl.value);
}
function updateBet(v){
  state.betAmount=parseInt(v);
  document.getElementById('betAmountDisplay').textContent=v;
  const pr=document.getElementById('fortunePreview');
  const allIn=parseInt(v)>=state.coins;
  if(allIn){pr.textContent='"CHAOS MODE ACTIVATED. 天意难测."';pr.classList.add('chaos');}
  else{
    pr.classList.remove('chaos');
    const m=betCopy.find(([a,b])=>parseInt(v)>=a&&parseInt(v)<=b);
    if(m) pr.textContent=m[2];
  }
}

// TAP LEVEL
function renderTapLevel(){
  if(!state.selectedHorse) return;
  document.getElementById('tapHorseEmoji').innerHTML=horseSVGsLarge[state.selectedHorse.emoji]||state.selectedHorse.en;
  document.getElementById('tapHorseName').textContent=`${state.selectedHorse.zh} — ${state.selectedHorse.en}`;
  document.getElementById('tapBalance').textContent=state.coins.toLocaleString();
  // Highlight selected level
  document.querySelectorAll('.tap-level-card').forEach(c=>c.classList.remove('selected'));
  const sel=document.querySelector(`[data-level="${state.tapDifficulty}"]`);
  if(sel) sel.classList.add('selected');
}

function selectTapLevel(level,amount){
  state.tapDifficulty=level;
  state.betAmount=amount;
  renderTapLevel();
}

// RACE
function startTapRace(){
  startRace();
}

function startRace(){
  const win=state.gameMode==='bet'?(Math.random()<0.48):null; // null=tap mode, determined by player
  state.raceResult=win;
  if(win){
    const f=winFortunes[Math.floor(Math.random()*winFortunes.length)];
    state.fortune=/^(Your|The dragon|You bet|Fortune|The zodiac)/.test(f)?f:`${state.selectedHorse.zh} ${f}`;
  } else {
    const f=loseFortunes[Math.floor(Math.random()*loseFortunes.length)];
    state.fortune=/^(The|You|Heaven|A loss)/.test(f)?f:`${state.selectedHorse.zh} ${f}`;
  }
  goTo('race');
}

function setupRace(){
  buildGrandstand(); buildTrack(); startCountdown();
}

function buildGrandstand(){
  const cr=document.getElementById('grandstandCrowd'); cr.innerHTML='';
  const cols=['#e74c3c','#e67e22','#f1c40f','#2ecc71','#3498db','#9b59b6','#e91e63','#ff5722'];
  for(let i=0;i<55;i++){
    const p=document.createElement('div'); p.className='crowd-person';
    p.style.height=(11+Math.floor(Math.random()*13))+'px';
    p.style.background=cols[Math.floor(Math.random()*cols.length)];
    p.style.opacity=(0.45+Math.random()*0.55).toString();
    p.style.animationDelay=(Math.random()*0.4)+'s';
    p.style.animationDuration=(0.28+Math.random()*0.28)+'s';
    cr.appendChild(p);
  }
}

function buildTrack(){
  const wrap=document.getElementById('raceTrackWrap');
  wrap.querySelectorAll('.race-horse,.dust,.track-speed-line').forEach(e=>e.remove());

  // Lane lines
  const ll=document.getElementById('laneLines'); ll.innerHTML='';
  for(let i=1;i<horses.length;i++){
    const l=document.createElement('div'); l.className='lane-line';
    l.style.top=(i*(100/horses.length))+'%'; ll.appendChild(l);
  }

  // Speed lines
  for(let i=0;i<5;i++){
    const sl=document.createElement('div'); sl.className='track-speed-line';
    sl.style.left=(8+i*18)+'%';
    sl.style.animationDuration=(0.55+Math.random()*0.45)+'s';
    sl.style.animationDelay=(Math.random()*0.5)+'s';
    wrap.appendChild(sl);
  }

  // Horse elements
  const lH=wrap.clientHeight/horses.length;
  horses.forEach((h,i)=>{
    const el=document.createElement('div');
    el.className='race-horse'+(h.id===state.selectedHorse.id?' player-horse':'');
    el.id='raceHorse'+i;
    el.style.top=(i*lH+lH/2)+'px'; el.style.left='20px';
    el.innerHTML=`${h.id===state.selectedHorse.id?'<div class="player-star">★</div>':''}
      <span class="race-horse-body">${horseSVGs[h.emoji]||h.en}</span>
      <span class="race-horse-label">${h.zh}</span>`;
    wrap.appendChild(el);
  });
}

function startCountdown(){
  const ov=document.getElementById('countdownOverlay');
  ov.style.display='flex'; ov.style.fontSize='108px'; let c=3; ov.textContent=c;
  const t=setInterval(()=>{
    c--;
    if(c===0){ov.textContent='马！';ov.style.fontSize='68px';setTimeout(()=>{ov.style.display='none';runRace();},600);clearInterval(t);}
    else ov.textContent=c;
  },800);
}

function runRace(){
  const isTapMode=state.gameMode==='tap';
  const win=isTapMode?null:state.raceResult;
  const pidx=state.selectedHorse.id;
  const wrap=document.getElementById('raceTrackWrap');
  const tw=wrap.clientWidth-68, lH=wrap.clientHeight/horses.length;
  const dur=12000, t0=Date.now();
  let chaosDone=false, slowDone=false, dustT=0;

  // Final order (for opponent placement)
  const order=[0,1,2,3,4];
  if(isTapMode){
    // Tap mode: shuffle opponents, player position determined by performance
    const others=order.filter(i=>i!==pidx).sort(()=>Math.random()-0.5);
    order.splice(0,5,...others);
  } else if(win){
    const o=order.filter(i=>i!==pidx).sort(()=>Math.random()-0.5);
    order.splice(0,5,pidx,...o);
  } else {
    const lp=1+Math.floor(Math.random()*3);
    const o=order.filter(i=>i!==pidx).sort(()=>Math.random()-0.5);
    o.splice(lp-1,0,pidx); order.splice(0,5,...o);
  }

  const wobble=horses.map(()=>({ph:Math.random()*Math.PI*2,amp:0.7+Math.random()*0.5}));

  // Tap mode tracking
  let tapCount=0;
  // Track player cumulative position in tap mode
  let playerTapPos=0;
  
  const tapHandler=isTapMode?e=>{
    e.preventDefault();
    tapCount++;
    // Each tap moves forward by 0.015 (meaning ~67 taps needed to reach finish)
    playerTapPos+=0.015;
    // Visual feedback
    wrap.style.filter='brightness(1.1)';
    setTimeout(()=>wrap.style.filter='',50);
  }:null;
  
  if(isTapMode){
    wrap.style.cursor='pointer';
    wrap.addEventListener('touchstart',tapHandler,{passive:false});
    wrap.addEventListener('mousedown',tapHandler);
  }

  // Difficulty speed multipliers
  const difficultySpeed={easy:1.0,medium:1.5,hard:2.0,extreme:3.0};
  const opponentMult=isTapMode?difficultySpeed[state.tapDifficulty]:1;

  function frame(){
    const el=Date.now()-t0, pr=Math.min(el/dur,1);
    document.getElementById('progressFill').style.width=(pr*100)+'%';
    document.getElementById('raceTimer').textContent=Math.max(0,Math.ceil(12-el/1000));

    if(!chaosDone&&el>5000){chaosDone=true;fireChaoticEvent(lH);}
    if(!slowDone&&el>9500){slowDone=true;document.getElementById('slowMoBanner').style.opacity='1';setTimeout(()=>document.getElementById('slowMoBanner').style.opacity='0',2400);}

    dustT+=16; if(dustT>110){dustT=0;spawnDust(wrap,lH);}

    // In tap mode, track cumulative player position from taps
    // Each tap moves forward by a fixed increment
    
    horses.forEach((h,i)=>{
      const e=document.getElementById('raceHorse'+i); if(!e) return;
      const rank=order.indexOf(i); let frac;
      
      if(isTapMode&&i===pidx){
        // Player in tap mode - position is ONLY from taps, no auto-movement
        frac=playerTapPos;
        e.dataset.tapPos=playerTapPos; // store for next frame
      } else if(!isTapMode&&win&&i===pidx){
        // Bet mode player win
        frac=pr<0.5?pr*0.5:0.25+(pr-0.5)*1.5;
      } else if(!isTapMode&&!win&&i===pidx){
        // Bet mode player lose
        frac=pr<0.65?pr*0.87:0.565+(pr-0.65)*0.64;
      } else {
        // Opponents
        const b=(4-rank)*0.054;
        const speedMult=isTapMode?opponentMult:1;
        frac=pr*(0.67+b)*speedMult+(pr>0.7?(pr-0.7)*b*2.2*speedMult:0);
      }
      
      frac=Math.min(frac,1);
      const x=20+frac*(tw-20);
      const y=Math.sin(el*0.012+wobble[i].ph)*wobble[i].amp;
      e.style.left=x+'px'; e.style.top=(i*lH+lH/2+y)+'px';
    });
    // Check if race should end
    let raceOver=false;
    let winnerIdx=-1;
    
    if(isTapMode){
      // In tap mode, race ends when ANY horse reaches finish (frac >= 1)
      horses.forEach((h,i)=>{
        const e=document.getElementById('raceHorse'+i);
        if(!e) return;
        const x=parseFloat(e.style.left)||0;
        const horseFrac=(x-20)/(tw-20);
        if(horseFrac>=0.99 && winnerIdx===-1){
          // First to cross finish line
          winnerIdx=i;
          raceOver=true;
        }
      });
    } else {
      // Bet mode - race ends when timer runs out
      raceOver=(pr>=1);
    }
    
    if(!raceOver){
      requestAnimationFrame(frame);
    } else {
      // Cleanup and determine result
      if(isTapMode){
        wrap.style.cursor='';
        wrap.removeEventListener('touchstart',tapHandler);
        wrap.removeEventListener('mousedown',tapHandler);
        state.raceResult=(winnerIdx===pidx);
      }
      showResult();
    }
  }
  requestAnimationFrame(frame);
}

function spawnDust(wrap,lH){
  horses.forEach((h,i)=>{
    if(Math.random()>0.28) return;
    const e=document.getElementById('raceHorse'+i); if(!e) return;
    const lx=parseFloat(e.style.left)-5; if(lx<10) return;
    const d=document.createElement('div'); d.className='dust';
    d.style.left=(lx-3+Math.random()*6)+'px';
    d.style.top=(i*lH+lH-7+Math.random()*5)+'px';
    d.style.animationDuration=(0.55+Math.random()*0.4)+'s';
    wrap.appendChild(d); setTimeout(()=>d.remove(),850);
  });
}

function fireChaoticEvent(lH){
  const wrap=document.getElementById('raceTrackWrap');
  const ev=document.createElement('div'); ev.className='chaos-event';
  ev.textContent=chaosEvents[Math.floor(Math.random()*chaosEvents.length)];
  const lane=state.selectedHorse.id;
  ev.style.top=(lane*lH+lH/2-18)+'px'; ev.style.left=(25+Math.random()*38)+'%';
  wrap.appendChild(ev); setTimeout(()=>ev.remove(),1400);
}

function showResult(){
  const win=state.raceResult, h=state.selectedHorse;
  const pay=win?Math.floor(state.betAmount*h.odds):-state.betAmount;
  state.coins=Math.max(0,state.coins+pay); localStorage.setItem('coins',state.coins);
  document.getElementById('resultHorse').innerHTML=horseSVGsLarge[h.emoji]||h.en;
  const b=document.getElementById('resultBadge');
  b.textContent=win?'WINNER!':'NEXT TIME'; b.className='result-badge '+(win?'win':'lose');
  const ch=document.getElementById('coinChange');
  ch.textContent=(win?'+':'')+pay+' COINS'; ch.className='coin-change '+(win?'win':'lose');
  document.getElementById('fortuneDisplay').textContent='"'+state.fortune+'"';
  if(win) fireWinParticles();
  updateTopBar(); goTo('result');
}

function fireWinParticles(){
  const em=['◆','✦','◈','✶','◉','★'];
  for(let i=0;i<16;i++) setTimeout(()=>{
    const p=document.createElement('div'); p.className='particle';
    p.textContent=em[Math.floor(Math.random()*em.length)];
    p.style.left=(5+Math.random()*88)+'vw'; p.style.top=(15+Math.random()*35)+'vh';
    p.style.animationDelay=(Math.random()*0.3)+'s';
    document.body.appendChild(p); setTimeout(()=>p.remove(),1200);
  },i*55);
}

function renderShareCard(){
  const h=state.selectedHorse; if(!h) return;
  document.getElementById('cardHorse').innerHTML=horseSVGsLarge[h.emoji]||h.en;
  const win=state.raceResult;
  const b=document.getElementById('cardBadge');
  b.textContent=win?'✦ WINNER ✦':'◆ FORTUNE ◆'; b.className='card-result-badge '+(win?'win':'lose');
  document.getElementById('cardFortune').textContent='"'+state.fortune+'"';
  document.getElementById('cardCoins').textContent=state.coins.toLocaleString();
}

function shareCard(){
  const text=`马到成功 — Race Your Fortune\n\n"${state.fortune}"\n\nFortune Collected: ${state.coins.toLocaleString()} coins\n\nCan you beat my fortune?`;
  if(navigator.share) navigator.share({title:'马到成功',text});
  else navigator.clipboard?.writeText(text).then(()=>{
    const b=event.target, o=b.textContent; b.textContent='COPIED! ✓';
    setTimeout(()=>b.textContent=o,2000);
  });
}

// INIT
function init(){
  updateTopBar();
  document.getElementById('splashCoins').textContent=state.coins.toLocaleString();
  document.getElementById('splashStreak').textContent=state.streak;
  setTimeout(()=>{
    const h=document.getElementById('splashHorse');
    if(h){h.style.left='50%';h.style.animation='gallop-bob 1s ease-in-out infinite';}
  },1200);
  const bg=document.getElementById('bgTexture');
  for(let i=0;i<10;i++){
    const l=document.createElement('div'); l.className='lantern';
    l.style.left=(5+Math.random()*88)+'%'; l.style.top=(5+Math.random()*88)+'%';
    l.style.animationDelay=(Math.random()*3)+'s'; l.style.animationDuration=(2+Math.random()*2.5)+'s';
    bg.appendChild(l);
  }
}
init();
</script>
</body>
</html>
